

```julia
import Pkg; Pkg.pkg"add https://github.com/dextorious/NumericalIntegration.jl"
import Pkg; Pkg.pkg"add https://github.com/francescoalemanno/Trapz.jl"
using NumericalIntegration, Trapz
```

```julia
N1=100
N2=200
vx=range(0,1,length=N1)
vy=range(0,2,length=N2)
M=[x^2+y^2-x*y for x in vx, y in vy]
```

    100×200 Array{Float64,2}:
     0.0          0.000101008  0.00040403   …  3.88031  3.92     3.9599   4.0    
     0.00010203   0.00010152   0.000303025     3.86051  3.90011  3.9399   3.9799
     0.000408122  0.000306094  0.000406081     3.84092  3.88041  3.92011  3.96   
     0.000918274  0.000714728  0.000713198     3.82153  3.86092  3.90052  3.94031
     0.00163249   0.00132742   0.00122438      3.80235  3.84164  3.88113  3.92082
     0.00255076   0.00214418   0.00193961   …  3.78337  3.82256  3.86195  3.90154
     0.00367309   0.003165     0.00285891      3.76459  3.80368  3.84297  3.88246
     0.00499949   0.00438987   0.00398227      3.74602  3.78501  3.8242   3.86359
     0.00652995   0.00581881   0.00530969      3.72766  3.76654  3.80563  3.84491
     0.00826446   0.00745181   0.00684117      3.70949  3.74828  3.78726  3.82645
     0.010203     0.00928887   0.00857672   …  3.69153  3.73022  3.7691   3.80818
     0.0123457    0.01133      0.0105163       3.67378  3.71236  3.75114  3.79012
     0.0146924    0.0135752    0.01266         3.65623  3.69471  3.73339  3.77227
     ⋮                                      ⋱                                    
     0.790123     0.781291     0.77266         2.91945  2.95021  2.98118  3.01235
     0.808183     0.799249     0.790517        2.91761  2.94828  2.97914  3.0102
     0.826446     0.817411     0.808577     …  2.91598  2.94654  2.9773   3.00826
     0.844914     0.835777     0.826842        2.91455  2.94501  2.97567  3.00653
     0.863585     0.854347     0.84531         2.91332  2.94368  2.97424  3.005  
     0.882461     0.873121     0.863983        2.9123   2.94256  2.97301  3.00367
     0.901541     0.892099     0.882859        2.91148  2.94164  2.97199  3.00255
     0.920824     0.911281     0.90194      …  2.91087  2.94092  2.97118  3.00163
     0.940312     0.930668     0.921225        2.91046  2.94041  2.97056  3.00092
     0.960004     0.950258     0.940714        2.91026  2.9401   2.97016  3.00041
     0.9799       0.970052     0.960407        2.91025  2.94     2.96995  3.0001
     1.0          0.990051     0.980304        2.91046  2.9401   2.96995  3.0    
```julia
trapz(vx,trapz(vy,M))
```
    2.333401012651793
```julia
integrate((vx,vy),M,TrapezoidalFast())
```
    2.333401012651791
```julia
@assert trapz(vx,trapz(vy,M)) ≈ integrate((vx,vy),M,TrapezoidalFast())
```
```julia
using BenchmarkTools
```
```julia
@benchmark trapz($vx,trapz($vy,$M))
```
    BenchmarkTools.Trial:
      memory estimate:  15.91 KiB
      allocs estimate:  303
      --------------
      minimum time:     11.764 μs (0.00% GC)
      median time:      12.516 μs (0.00% GC)
      mean time:        23.284 μs (35.16% GC)
      maximum time:     59.424 ms (99.91% GC)
      --------------
      samples:          10000
      evals/sample:     1

```julia
T=(vx,vy)
mode=TrapezoidalFast()
@benchmark integrate($T,$M,$mode)
```
    BenchmarkTools.Trial:
      memory estimate:  11.39 KiB
      allocs estimate:  204
      --------------
      minimum time:     187.960 μs (0.00% GC)
      median time:      188.815 μs (0.00% GC)
      mean time:        199.746 μs (4.07% GC)
      maximum time:     58.357 ms (99.61% GC)
      --------------
      samples:          10000
      evals/sample:     1

```julia
(@belapsed integrate($T,$M,$mode))/(@belapsed trapz($vx,trapz($vy,$M)))
```

    16.03746053417527

```julia
N1=10000
N2=10000
vx=range(0,1,length=N1)
vy=range(0,2,length=N2)
M=[x^2+y^2-x*y for x in vx, y in vy]
```

    10000×10000 Array{Float64,2}:
     0.0         4.0008e-8   1.60032e-7  …  3.9976  3.9984  3.9992  4.0   
     1.0002e-8   3.0006e-8   1.30026e-7     3.9974  3.9982  3.999   3.9998
     4.0008e-8   4.0008e-8   1.20024e-7     3.9972  3.998   3.9988  3.9996
     9.0018e-8   7.0014e-8   1.30026e-7     3.997   3.9978  3.9986  3.9994
     1.60032e-7  1.20024e-7  1.60032e-7     3.9968  3.9976  3.9984  3.9992
     2.5005e-7   1.90038e-7  2.10042e-7  …  3.9966  3.9974  3.9982  3.999
     3.60072e-7  2.80056e-7  2.80056e-7     3.9964  3.9972  3.998   3.9988
     4.90098e-7  3.90078e-7  3.70074e-7     3.9962  3.997   3.9978  3.9986
     6.40128e-7  5.20104e-7  4.80096e-7     3.996   3.9968  3.9976  3.9984
     8.10162e-7  6.70134e-7  6.10122e-7     3.9958  3.9966  3.9974  3.9982
     1.0002e-6   8.40168e-7  7.60152e-7  …  3.9956  3.9964  3.9972  3.998
     1.21024e-6  1.03021e-6  9.30186e-7     3.9954  3.9962  3.997   3.9978
     1.44029e-6  1.24025e-6  1.12022e-6     3.9952  3.996   3.9968  3.9976
     ⋮                                   ⋱                                
     0.997801    0.997601    0.997402       2.9982  2.9988  2.9994  3.0   
     0.998001    0.997801    0.997601       2.9982  2.9988  2.9994  3.0   
     0.998201    0.998001    0.997801    …  2.9982  2.9988  2.9994  3.0   
     0.9984      0.998201    0.998001       2.9982  2.9988  2.9994  3.0   
     0.9986      0.998401    0.998201       2.9982  2.9988  2.9994  3.0   
     0.9988      0.9986      0.998401       2.9982  2.9988  2.9994  3.0   
     0.999       0.9988      0.9986         2.9982  2.9988  2.9994  3.0   
     0.9992      0.999       0.9988      …  2.9982  2.9988  2.9994  3.0   
     0.9994      0.9992      0.999          2.9982  2.9988  2.9994  3.0   
     0.9996      0.9994      0.9992         2.9982  2.9988  2.9994  3.0   
     0.9998      0.9996      0.9994         2.9982  2.9988  2.9994  3.0   
     1.0         0.9998      0.9996         2.9982  2.9988  2.9994  3.0   

```julia
@benchmark trapz($vx,trapz($vy,$M))
```

    BenchmarkTools.Trial:
      memory estimate:  1.07 MiB
      allocs estimate:  20005
      --------------
      minimum time:     70.862 ms (0.00% GC)
      median time:      72.430 ms (0.00% GC)
      mean time:        72.726 ms (0.11% GC)
      maximum time:     81.861 ms (0.00% GC)
      --------------
      samples:          69
      evals/sample:     1

```julia
T=(vx,vy)
mode=TrapezoidalFast()
@benchmark integrate($T,$M,$mode)
```

    BenchmarkTools.Trial:
      memory estimate:  547.20 KiB
      allocs estimate:  10005
      --------------
      minimum time:     922.351 ms (0.00% GC)
      median time:      924.579 ms (0.00% GC)
      mean time:        924.828 ms (0.00% GC)
      maximum time:     929.363 ms (0.00% GC)
      --------------
      samples:          6
      evals/sample:     1

```julia
(@belapsed integrate($T,$M,$mode))/(@belapsed trapz($vx,trapz($vy,$M)))
```
    13.034281085710017
